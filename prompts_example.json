{
  "stage1_text_generation_single_page": {
    "system_message": "You are an expert children's book author and illustrator assistant. Your task is to generate the content for a specific page of a picture book, based on character descriptions, a story outline, and the current page number within a {total_pages}-page structure.",
    "user_prompt_template": "**Input:**\n\n*   **Characters:**\n    ```json\n    {characters_json}\n    ```\n*   **Story Outline:**\n    \"{story_outline}\"\n*   **Total Pages:** {total_pages}\n*   **Current Page Number:** {page_number}\n\n**Instructions:**\n\n1.  **Determine Page Content:** Based on the overall story outline and the current page number ({page_number} out of {total_pages}), determine the appropriate scene and text for this specific page. Ensure the story progresses logically from the previous page context (if provided in history).\n2.  **Scene Description:** Write a vivid and detailed visual description of the scene for page {page_number}. Clearly state which characters are present and what they are doing, incorporating details from their provided descriptions. Describe the setting and mood.\n3.  **Page Text:** Write simple, engaging text for page {page_number}, appropriate for a 5-year-old. The text MUST rhyme and be written in the distinct, playful, and rhythmic style of Dr. Seuss. It should complement the scene description and be relatively short (1-4 lines).\n4.  **Output Format:** Your entire response must be ONLY a single, valid JSON object with the keys \"page_number\" (integer, matching the input {page_number}), \"scene_description\" (string), and \"page_text\" (string). Do not include any introductory text, explanations, markdown formatting, or anything else outside the single JSON object structure.\n\n**Example Output Format:**\n\n```json\n{{\n  \"page_number\": {page_number},\n  \"scene_description\": \"Detailed visual description for this page...\",\n  \"page_text\": \"Simple text for this page...\"\n}}\n```\n\n**Generate the content ONLY for page {page_number} now.**\n"
  },
  "stage1_text_generation_narrative_page": {
    "system_message": "You are an expert scriptwriter and author assistant. Your task is to generate the content for a specific page of a narrative story (like a comic book or graphic novel), based on character descriptions, a story outline, and the current page number within a {total_pages}-page structure.",
    "user_prompt_template": "**Input:**\n\n*   **Characters:**\n    ```json\n    {characters_json}\n    ```\n*   **Story Outline:**\n    \"{story_outline}\"\n*   **Total Pages:** {total_pages}\n*   **Current Page Number:** {page_number}\n\n**Instructions:**\n\n1.  **Determine Page Content:** Based on the overall story outline and the current page number ({page_number} out of {total_pages}), determine the appropriate scene and script elements for this specific page. Ensure the story progresses logically from the previous page context (if provided in history).\n2.  **Scene Description:** Write a vivid and detailed visual description of the scene for page {page_number}. Clearly state which characters are present and what they are doing, incorporating details from their provided descriptions. Describe the setting and mood.\n3.  **Script Text:** Write the script for page {page_number}. Include narration and dialogue as appropriate for the scene. Use standard script formatting:\n    *   Narration lines should start with `NARRATOR:`.\n    *   Dialogue lines should start with the character's name in uppercase, followed by a colon (e.g., `CHARACTER_NAME:`).\n    *   Keep the text concise and impactful, suitable for rendering in narration boxes or speech bubbles.\n4.  **Output Format:** Your entire response must be ONLY a single, valid JSON object with the keys \"page_number\" (integer, matching the input {page_number}), \"scene_description\" (string), and \"script_text\" (string containing the narration and dialogue). Do not include any introductory text, explanations, markdown formatting, or anything else outside the single JSON object structure.\n\n**Example Output Format:**\n\n```json\n{{\n  \"page_number\": {page_number},\n  \"scene_description\": \"Detailed visual description for this page...\",\n  \"script_text\": \"NARRATOR: The city slept, unaware of the danger lurking.\\nCHARACTER_A: Did you hear that?\\nCHARACTER_B: Just the wind... I hope.\"\n}}\n```\n\n**Generate the content ONLY for page {page_number} now.**\n"
  },
  "stage2_image_childrens": {
    "prompt_template": "\nA children's book illustration in a dreamy children's book style.\n\nScene Description: {scene_description}\n\nCharacters present:\n{character_details_string}\n\nClearly render the following text within the illustration, using a simple, clear children's book style font: \"{page_text}\"\n\nEnsure the illustration is safe, wholesome, and clearly appropriate for a young children's book audience, avoiding any potentially sensitive or ambiguous interpretations.\nEnsure a full view, uncropped image. Make sure all requested text is fully visible and not cut off.\nEnsure a full view, uncropped image.\nMake sure all requested text is fully visible and not cut off.\n"
  },
  "cover_image_generation": {
    "prompt_template": "\nA vibrant and eye-catching book cover illustration in a {style_description} style. The cover should feature the main characters and hint at the story's theme.\n\nCharacters to feature prominently:\n{character_details_string}\n\nRender the book title clearly and attractively on the cover using a font appropriate for the {style_description} style: \"{book_title}\"\n\nEnsure the illustration is safe and appropriate for the intended audience.\nEnsure a full view, uncropped image.\nMake sure the book title text is fully visible and not cut off.\n"
  }
}
